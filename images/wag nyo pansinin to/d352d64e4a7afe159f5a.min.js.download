(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{1057:function(e,r,n){var t,o;n(1),n(4),n(2),n(3),n(6),t=[r,n(13),n(7),n(9),n(108),n(5),n(325),n(157),n(76),n(103),n(120),n(118),n(336),n(744)],void 0===(o=function(e,r,n,t,o,a,i,c,u,s,d,p,l,f){"use strict";var w;function m(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function b(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?m(Object(n),!0).forEach((function(r){g(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function g(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function y(e,r,n,t,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?r(u):Promise.resolve(u).then(t,o)}function h(e){return function(){var r=this,n=arguments;return new Promise((function(t,o){var a=e.apply(r,n);function i(e){y(a,t,o,i,c,"next",e)}function c(e){y(a,t,o,i,c,"throw",e)}i(void 0)}))}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){return x.apply(this,arguments)},p=(w=p)&&w.__esModule?w:{default:w};var v=window.snowdog.recommendations,O=v.synerise,j=window.snowdog.viewType||!1,k=window.snowdog.breadcrumbs||!1;function x(){return(x=h(regeneratorRuntime.mark((function e(r){var n,t,o,a,i,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=2;break}throw new Error("Synerise configuration not found");case 2:if(Object.keys(v.campaigns).find((function(e){return v.campaigns[e].id===r}))){e.next=5;break}throw new Error("Synerise campaign not found");case 5:return n=O.api.url,t=O.api.key,o=(0,l.getCookie)("_snrs_uuid"),a=window.snowdog.global.currency,(i={}).clientUUID=o,window.productData&&(i.product=window.productData.sku),"category"===j&&k.length>0&&(i.categoryCustomIncluded=k.map((function(e){return e.label})).join(" > ")),e.next=15,(0,p.default)({method:"GET",url:"".concat(n,"recommendations/v1/campaigns/").concat(r),params:i,headers:{"content-type":"application/json","x-api-key":t}});case 15:if((c=e.sent).headers["x-correlation-id"]){e.next=18;break}throw new Error("Synerise recommendations fetching failed");case 18:return u=(0,f.getExperimentVariant)("salesrulelabel"),c.data=c.data.map((function(e){return b(b({currency:a},e),{},{imageLink:e.imageLink.replace("media/catalog/product","media/catalog/product/cache/small_image/300x300"),salesRuleId:u&&(null==e?void 0:e.salesRuleId)||""})})),e.abrupt("return",{products:c.data,correlationId:c.headers["x-correlation-id"]});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}p.default.interceptors.response.use((function(e){return e}),(function(e){throw e}))}.apply(r,t))||(e.exports=o)}}]);
//# sourceMappingURL=d352d64e4a7afe159f5a.min.js.map